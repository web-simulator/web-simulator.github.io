(function(){"use strict";self.onmessage=_=>{const A=_.data;let{k:m,A:y,alpha:x,L:M,dx:r,dt:e,totalTime:g,downsamplingFactor:F}=A;const u=r*r/(2*m);e>u&&(e=u*.9);const o=Math.floor(M/r);let l=new Array(o).fill(0);const D=Math.floor(o/10);for(let s=0;s<D;s++)l[s]=1.05;const L=Math.floor(g/e),h=[];function d(s,n){const c=m*(s[n+1]-2*s[n]+s[n-1])/(r*r),p=y*s[n]*(1-s[n])*(s[n]-x);return c+p}for(let s=0;s<L;s++){const n=[...l],c=new Array(o).fill(0),p=new Array(o).fill(0),k=new Array(o).fill(0),w=new Array(o).fill(0);for(let t=1;t<o-1;t++)c[t]=e*d(n,t);n[0]=n[1],n[o-1]=n[o-2];const f=[...n];for(let t=1;t<o-1;t++)f[t]=n[t]+.5*c[t];f[0]=f[1],f[o-1]=f[o-2];for(let t=1;t<o-1;t++)p[t]=e*d(f,t);const i=[...n];for(let t=1;t<o-1;t++)i[t]=n[t]+.5*p[t];i[0]=i[1],i[o-1]=i[o-2];for(let t=1;t<o-1;t++)k[t]=e*d(i,t);const a=[...n];for(let t=1;t<o-1;t++)a[t]=n[t]+k[t];a[0]=a[1],a[o-1]=a[o-2];for(let t=1;t<o-1;t++)w[t]=e*d(a,t);for(let t=1;t<o-1;t++)l[t]=n[t]+1/6*(c[t]+2*p[t]+2*k[t]+w[t]);if(l[0]=l[1],l[o-1]=l[o-2],s%F===0){const t=l.map((N,T)=>({x:T*r,v:N,tempo:(s*e).toFixed(2)}));h.push({time:(s*e).toFixed(2),data:t})}}self.postMessage(h)}})();
