(function(){"use strict";function b(i,p,_,h,m,d){for(let n=0;n<d;n++){const o=h+n*m;if(i>=o&&i<o+_)return p}return 0}self.onmessage=i=>{const p=i.data,{despolarização:_,repolarização:h,recuperação:m,inativação:d,gate:n,dt:o,v_inicial:z,h_inicial:F,inicio:M,duração:J,amplitude:B,BCL:g,num_estimulos:w,downsamplingFactor:C}=p,D=M+w*g+50,s=parseInt(D/o,10),e=new Array(s),c=new Array(s),r=new Array(s);c[0]=z,r[0]=F,e[0]=0;for(let t=1;t<s;t++){e[t]=t*o;const I=e[t],L=b(I,B,J,M,g,w),a=c[t-1],u=r[t-1],j=u*a**2*(1-a)/_,k=-a/h,q=j+k+L,E=a+q*o;let l,f;a<n?(l=1/m,f=0):(l=0,f=1/d);const v=l+f;let x;if(v>0){const A=l/v,G=Math.exp(-v*o);x=A+(u-A)*G}else x=u;c[t]=Math.max(0,Math.min(1,E)),r[t]=Math.max(0,Math.min(1,x))}const y=[];for(let t=0;t<s;t+=C)e[t]!==void 0&&y.push({tempo:e[t].toFixed(2),v:c[t],h:r[t]});self.postMessage(y)}})();
